<div class="prediction-container">
  <h1 class="title">Prédiction du Diabète</h1>
  <form (ngSubmit)="submitData()" class="form" role="form" aria-labelledby="form-title">
    <div class="form-group">
      <label for="gender">Genre <span class="required">*</span></label>
      <select id="gender" [(ngModel)]="patientData.gender" name="gender" required aria-required="true">
        <option value="" disabled selected>Choisir...</option>
        <option value="Male">Homme</option>
        <option value="Female">Femme</option>
      </select>
    </div>
    <div class="form-group">
      <label for="age">Âge <span class="required">*</span></label>
      <input
        id="age"
        type="number"
        [(ngModel)]="patientData.age"
        name="age"
        required
        aria-required="true"
        placeholder="Ex: 30"
      />
    </div>
    <div class="form-group">
      <label for="hypertension">Hypertension</label>
      <input
        id="hypertension"
        type="checkbox"
        [(ngModel)]="patientData.hypertension"
        name="hypertension"
        aria-checked="false"
      />
    </div>
    <div class="form-group">
      <label for="heart_disease">Maladie cardiaque</label>
      <input
        id="heart_disease"
        type="checkbox"
        [(ngModel)]="patientData.heart_disease"
        name="heart_disease"
        aria-checked="false"
      />
    </div>
    <div class="form-group">
      <label for="smoking_history">Historique de tabagisme <span class="required">*</span></label>
      <select
        id="smoking_history"
        [(ngModel)]="patientData.smoking_history"
        name="smoking_history"
        required
        aria-required="true"
      >
        <option value="" disabled selected>Choisir...</option>
        <option value="never">Jamais</option>
        <option value="former">Ancien fumeur</option>
        <option value="current">Fumeur actuel</option>
        <option value="not current">Non fumeur actuel</option>
        <option value="ever">A fumé</option>
        <option value="No Info">Aucune info</option>
      </select>
    </div>
    <div class="form-group">
      <label for="bmi">IMC (BMI) <span class="required">*</span></label>
      <input
        id="bmi"
        type="number"
        step="0.1"
        [(ngModel)]="patientData.bmi"
        name="bmi"
        required
        aria-required="true"
        placeholder="Ex: 25.5"
      />
    </div>
    <div class="form-group">
      <label for="HbA1c_level">Niveau HbA1c (%) <span class="required">*</span></label>
      <input
        id="HbA1c_level"
        type="number"
        step="0.1"
        [(ngModel)]="patientData.HbA1c_level"
        name="HbA1c_level"
        required
        aria-required="true"
        placeholder="Ex: 5.7"
      />
    </div>
    <div class="form-group">
      <label for="blood_glucose_level">Niveau de glucose sanguin (mg/dL) <span class="required">*</span></label>
      <input
        id="blood_glucose_level"
        type="number"
        [(ngModel)]="patientData.blood_glucose_level"
        name="blood_glucose_level"
        required
        aria-required="true"
        placeholder="Ex: 120"
      />
    </div>
    <button type="submit" class="submit-btn" [disabled]="loading">
      {{ loading ? 'Prédiction en cours...' : 'Prédire' }}
    </button>
  </form>

  <div *ngIf="probability !== null" class="result" [ngClass]="getResultClass()">
    <h2>Résultat</h2>
    <p>Probabilité de diabète : <strong>{{ probability | number:'1.0-2' }}%</strong></p>
  </div>

  <p *ngIf="errorMessage" class="error" role="alert">{{ errorMessage }}</p>
</div>